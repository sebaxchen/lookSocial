<div class="about-container">
  @if (taskStore.taskCount() === 0) {
    <div class="empty-about-state">
      <mat-icon class="empty-icon">assignment</mat-icon>
      <h2 class="empty-title">No hay tareas aún</h2>
      <p class="empty-message">Añade una nota en <strong>Home</strong> para comenzar</p>
    </div>
  } @else {
  <!-- Three Column Layout -->
  <div class="tasks-columns">
    <!-- Not Started Column -->
    <div class="task-column not-started-column">
      <mat-card class="column-header">
        <mat-card-header>
          <mat-card-title>
            <mat-icon>play_circle_outline</mat-icon>
            Sin Iniciar
            <span class="task-count">({{ taskStore.notStartedCount() }})</span>
          </mat-card-title>
        </mat-card-header>
      </mat-card>
      
      <div class="tasks-list">
        @for (task of taskStore.notStartedTasks(); track task.id) {
          <mat-card class="task-card">
            <mat-card-content>
              <div class="task-header">
                <h3 class="task-title">{{ task.title }}</h3>
                <button mat-icon-button (click)="deleteTask(task.id)" class="delete-btn">
                  <mat-icon>delete</mat-icon>
                </button>
              </div>
              
              @if (task.description) {
                <p class="task-description">{{ task.description }}</p>
              }
              
              <div class="task-controls">
                <div class="task-meta">
                  <span class="priority-chip priority-{{ task.priority }}">
                    <mat-icon>{{ getPriorityIcon(task.priority) }}</mat-icon>
                    {{ task.priority | titlecase }}
                  </span>
                  @if (task.assignee) {
                    <span class="assignee-chip">
                      <div class="assignee-avatar" [style.background-color]="getMemberColor(task.assignee)">
                        {{ task.assignee.charAt(0).toUpperCase() }}
                      </div>
                      {{ task.assignee }}
                    </span>
                  }
                  @if (getTaskGroup(task.id)) {
                    <span class="group-chip">
                      <div class="group-avatar" [style.background-color]="getGroupColor(getTaskGroup(task.id)?.name!)">
                        {{ getGroupInitials(getTaskGroup(task.id)?.name!) }}
                      </div>
                      {{ getTaskGroup(task.id)?.name }}
                    </span>
                  }
                  <div class="task-assignee-selector">
                    <app-assignee-selector
                      [selectedAssignee]="getTaskAssigneeSignal(task.id)"
                      [disabled]="getDisabledSignal()"
                      (assigneeChange)="updateAssignee(task.id, $event)">
                    </app-assignee-selector>
                  </div>
                </div>
                
                <div class="task-actions">
                  <div class="task-status">
                    <app-status-selector
                      [currentStatus]="getTaskStatusSignal(task.status)"
                      [disabled]="getDisabledSignal()"
                      (statusChange)="updateStatus(task.id, $event)">
                    </app-status-selector>
                  </div>
                </div>
              </div>
            </mat-card-content>
          </mat-card>
        }
        
        @if (taskStore.notStartedTasks().length === 0) {
          <div class="empty-state">
            <mat-icon>inbox</mat-icon>
            <p>No hay tareas sin iniciar</p>
          </div>
        }
      </div>
    </div>

    <!-- In Progress Column -->
    <div class="task-column in-progress-column">
      <mat-card class="column-header">
        <mat-card-header>
          <mat-card-title>
            <mat-icon>hourglass_empty</mat-icon>
            En Progreso
            <span class="task-count">({{ taskStore.inProgressCount() }})</span>
          </mat-card-title>
        </mat-card-header>
      </mat-card>
      
      <div class="tasks-list">
        @for (task of taskStore.inProgressTasks(); track task.id) {
          <mat-card class="task-card">
            <mat-card-content>
              <div class="task-header">
                <h3 class="task-title">{{ task.title }}</h3>
                <button mat-icon-button (click)="deleteTask(task.id)" class="delete-btn">
                  <mat-icon>delete</mat-icon>
                </button>
              </div>
              
              @if (task.description) {
                <p class="task-description">{{ task.description }}</p>
              }
              
              <div class="task-controls">
                <div class="task-meta">
                  <span class="priority-chip priority-{{ task.priority }}">
                    <mat-icon>{{ getPriorityIcon(task.priority) }}</mat-icon>
                    {{ task.priority | titlecase }}
                  </span>
                  @if (task.assignee) {
                    <span class="assignee-chip">
                      <div class="assignee-avatar" [style.background-color]="getMemberColor(task.assignee)">
                        {{ task.assignee.charAt(0).toUpperCase() }}
                      </div>
                      {{ task.assignee }}
                    </span>
                  }
                  @if (getTaskGroup(task.id)) {
                    <span class="group-chip">
                      <div class="group-avatar" [style.background-color]="getGroupColor(getTaskGroup(task.id)?.name!)">
                        {{ getGroupInitials(getTaskGroup(task.id)?.name!) }}
                      </div>
                      {{ getTaskGroup(task.id)?.name }}
                    </span>
                  }
                  <div class="task-assignee-selector">
                    <app-assignee-selector
                      [selectedAssignee]="getTaskAssigneeSignal(task.id)"
                      [disabled]="getDisabledSignal()"
                      (assigneeChange)="updateAssignee(task.id, $event)">
                    </app-assignee-selector>
                  </div>
                </div>
                
                <div class="task-actions">
                  <div class="task-status">
                    <app-status-selector
                      [currentStatus]="getTaskStatusSignal(task.status)"
                      [disabled]="getDisabledSignal()"
                      (statusChange)="updateStatus(task.id, $event)">
                    </app-status-selector>
                  </div>
                </div>
              </div>
            </mat-card-content>
          </mat-card>
        }
        
        @if (taskStore.inProgressTasks().length === 0) {
          <div class="empty-state">
            <mat-icon>work_outline</mat-icon>
            <p>No hay tareas en progreso</p>
          </div>
        }
      </div>
    </div>

    <!-- Completed Column -->
    <div class="task-column completed-column">
      <mat-card class="column-header">
        <mat-card-header>
          <mat-card-title>
            <mat-icon>check_circle</mat-icon>
            Terminadas
            <span class="task-count">({{ taskStore.completedCount() }})</span>
          </mat-card-title>
        </mat-card-header>
      </mat-card>
      
      <div class="tasks-list">
        @for (task of taskStore.completedTasks(); track task.id) {
          <mat-card class="task-card">
            <mat-card-content>
              <div class="task-header">
                <h3 class="task-title completed">{{ task.title }}</h3>
                <button mat-icon-button (click)="deleteTask(task.id)" class="delete-btn">
                  <mat-icon>delete</mat-icon>
                </button>
              </div>
              
              @if (task.description) {
                <p class="task-description">{{ task.description }}</p>
              }
              
              <div class="task-controls">
                <div class="task-meta">
                  <span class="priority-chip priority-{{ task.priority }}">
                    <mat-icon>{{ getPriorityIcon(task.priority) }}</mat-icon>
                    {{ task.priority | titlecase }}
                  </span>
                  @if (task.assignee) {
                    <span class="assignee-chip">
                      <div class="assignee-avatar" [style.background-color]="getMemberColor(task.assignee)">
                        {{ task.assignee.charAt(0).toUpperCase() }}
                      </div>
                      {{ task.assignee }}
                    </span>
                  }
                  @if (getTaskGroup(task.id)) {
                    <span class="group-chip">
                      <div class="group-avatar" [style.background-color]="getGroupColor(getTaskGroup(task.id)?.name!)">
                        {{ getGroupInitials(getTaskGroup(task.id)?.name!) }}
                      </div>
                      {{ getTaskGroup(task.id)?.name }}
                    </span>
                  }
                  <div class="task-assignee-selector">
                    <app-assignee-selector
                      [selectedAssignee]="getTaskAssigneeSignal(task.id)"
                      [disabled]="getDisabledSignal()"
                      (assigneeChange)="updateAssignee(task.id, $event)">
                    </app-assignee-selector>
                  </div>
                </div>
                
                <div class="task-actions">
                  <div class="task-status">
                    <app-status-selector
                      [currentStatus]="getTaskStatusSignal(task.status)"
                      [disabled]="getDisabledSignal()"
                      (statusChange)="updateStatus(task.id, $event)">
                    </app-status-selector>
                  </div>
                </div>
              </div>
            </mat-card-content>
          </mat-card>
        }
        
        @if (taskStore.completedTasks().length === 0) {
          <div class="empty-state">
            <mat-icon>task_alt</mat-icon>
            <p>No hay tareas terminadas</p>
          </div>
        }
      </div>
    </div>
  </div>
  }
</div>
